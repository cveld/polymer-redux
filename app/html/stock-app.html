<link rel="import" href="../../bower/polymer/polymer.html">
<link rel="import" href="../../bower/paper-input/paper-input.html">
<link rel="import" href="../../bower/paper-button/paper-button.html">
<link rel="import" href="../../bower/iron-icon/iron-icon.html">
<link rel='import' href="../../bower/iron-iconset-svg/iron-iconset-svg.html">

<link rel="import" href="stock-view.html">
<link rel="import" href="app-store.html">
<link rel="import" href="app-reducer.html">
<link rel="import" href="stock-search.html">

<dom-module id="stock-app">
    <style>
        :host {
            display: block;
        }
    </style>
    <template>
        <!-- store.dispatch(store.actions.CHANGE_STOCK, name); -->
        <app-store id="store" state="{{state}}" reducer="[[reducer]]"></app-store>
        <app-reducer id="reducer"></app-reducer>

        <stock-view stockname="[[state.stockName]]" stockdetails="[[state.stockDetails]]">
            <stock-search stockname="[[state.stockName]]"></stock-search>
        </stock-view>
    </template>
    <script>
        (function () {
            'use strict';

            class StockApp {
                // Element setup goes in beforeRegister instead of createdCallback.
                beforeRegister() {
                    this.is = 'stock-app';

                    // Define the properties object in beforeRegister.
                    this.properties = {
                        state: {
                            type: Object,
                            notify: true
                        },
                        reducer: {
                            type: Object,
                            notify: true
                        }
                    };
                }

                ready() {
                    this.state = this.$.store.state;
                    this.reducer = this.$.reducer;
                }
            }

            // Register the element using Polymer's constructor.
            Polymer(StockApp);
        })();
    </script>
</dom-module>
